function Execute(){var e=this;e.maskwapper=$(".mask-wapper-add"),e.scollwapper=$(".scoll-wapper"),e.maskwapper_Review=$(".mask-wapper-Review")}Execute.prototype.run=function(){var e=this;e.listenshowhideEvent(),e.listenSigninEvent(),e.listenreviseEvent(),e.listenDeleteEvent(),e.listenDataPiker(),e.listenselectnow(),e.listenReviewEvent(),e.listenReviewSbumitEvent()},Execute.prototype.showEvent=function(){this.maskwapper.show()},Execute.prototype.showReviewEvent=function(){this.maskwapper_Review.show()},Execute.prototype.hideEvent=function(){this.maskwapper.hide(),this.maskwapper_Review.hide()},Execute.prototype.listenshowhideEvent=function(){var c=this,e=$(".add-btn"),t=$(".editor-btn"),n=$(".close-btn"),i=$(".revise-btn"),a=$(".cancle-btn");$(".Review-btn");t.click(function(){c.showEvent(),c.scollwapper.css({left:"-500px"});var e=$(this);tr=e.parent().parent();var t=tr.attr("executeID"),n=tr.attr("AlterID"),i=tr.attr("Hospital"),a=tr.attr("ExecutionResult"),o=tr.attr("Executor"),r=tr.attr("ExecutionTime");$("#ID-executeID").val(t),$("#ID-AlterID").val(n),$("#ID-Hospital").val(i),$("#ID-ExecutionResult").val(a),$("#ID-Executor").val(o),$("#ID-ExecutionTime").val(r)}),e.click(function(){c.showEvent(),c.scollwapper.css({left:"0"})}),n.click(function(){c.hideEvent()}),i.click(function(){}),a.click(function(){c.hideEvent()})},Execute.prototype.listenreviseEvent=function(){var e=$(".revise-group"),r=e.find("input[name='AlterID']"),c=e.find("input[name='AlterType']"),l=e.find("input[name='AssociatedNumber']"),s=e.find("input[name='Datebase']"),u=e.find("textarea[name='AlterContent']"),p=e.find("input[name='Informant']");e.find(".revise-btn").click(function(){var e=r.val(),t=c.val(),n=l.val(),i=s.val(),a=u.val(),o=p.val();xfzajax.post({url:"/alter/edit_Alter_manager/",data:{AlterID:e,AlterType:t,AssociatedNumber:n,Datebase:i,AlterContent:a,Informant:o},success:function(e){200===e.code&&(window.messageBox.show("修改成功"),setTimeout("window.location.reload()","500"))}})})},Execute.prototype.listenSigninEvent=function(){var e=$(".Add-group"),a=e.find("input[name='AlterID']"),o=e.find("input[name='Hospital']"),r=e.find("textarea[name='ExecutionResult']"),c=e.find("input[name='Executor']");e.find(".submit-btn").click(function(){var e=a.val(),t=o.val(),n=r.val(),i=c.val();xfzajax.post({url:"/execute/add_Alter_Execute/",data:{AlterID:e,Hospital:t,ExecutionResult:n,Executor:i},success:function(e){200===e.code&&(window.messageBox.show("添加成功"),setTimeout("window.location.reload()","300"))}})})},Execute.prototype.listenDeleteEvent=function(){$(".delete-btn").click(function(){var e=$(this).parent().parent().attr("AlterID");xfzajax.post({url:"/alter/delete_Alter_manager/",data:{AlterID:e},success:function(e){200===e.code&&(window.messageBox.show("删除成功"),setTimeout("window.location.reload()","300"))}})})},Execute.prototype.listenDataPiker=function(){var e=$("#startpicker"),t=$("#endpicker"),n=new Date,i={showButtonPanel:!0,format:"yyyy/mm/dd",startDate:"2017/6/1",endDate:n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate(),language:"zh-CN",todayBtn:"linked",todayHighlight:!0,clearBtn:!0,autoclose:!0};e.datepicker(i),t.datepicker(i)},getchecked=function(){for(var e=document.getElementsByName("se"),t=0;t<e.length;t++)if(1==e[t].checked)return e[t]},Execute.prototype.listenReviewEvent=function(){var n=this;$(".Review-btn").click(function(){var e=getchecked();if(e){var t=e.parentElement.parentElement.getAttribute("alterid");alert(t),n.showReviewEvent()}else alert("一个没有选中")})},Execute.prototype.listenselectnow=function(){$(".box-footer"),$(".box-header");var t=$(".tr-line"),n=0;t.click(function(){if(++n%2==0)t.removeClass("colour"),t.find("input[type='checkbox']").prop("checked",!1);else{var e=$(this);e.addClass("colour").siblings("tr.colour").removeClass("colour"),ckbox=e.children().children(),t.find("input[type='checkbox']").prop("checked",!1),ckbox.prop("checked",!0)}})},Execute.prototype.listenReviewSbumitEvent=function(){var e=$(".Review-group"),t=$(".Reviewsub-btn"),a=e.find("textarea[name='ReviewContent']"),o=e.find("input[name='Reviewer']");t.click(function(){var e=$("input:radio[name='Reviewstatus']:checked").val(),t=getchecked().parentElement.parentElement.getAttribute("alterid"),n=a.val(),i=o.val();alert(t),alert(e),alert(n),alert(i),xfzajax.post({url:"/alter/Review_Alter_manager/",data:{AlterID:t,ReviewStatus:e,ReviewContent:n,Reviewer:i},success:function(e){200===e.code&&(window.messageBox.show("审核成功"),setTimeout("window.location.reload()","300"))}})})},$(function(){(new Execute).run()});