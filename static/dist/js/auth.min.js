function Auth(){this.maskwapper=$(".mask-wapper"),this.scollwapper=$(".scoll-wapper")}Auth.prototype.run=function(){var e=this;e.listenshowhideEvent(),e.listenSwitchEvent(),e.listenAddStaffEvent(),e.listenCancellationEvent(),e.listenEditStaffEvent()},Auth.prototype.showEvent=function(){this.maskwapper.show()},Auth.prototype.hideEvent=function(){this.maskwapper.hide()},Auth.prototype.listenshowhideEvent=function(){var e=this,t=$(".editor-btn"),o=$(".delete-btn"),n=$(".close-btn");t.click(function(){e.showEvent()}),o.click(function(){e.showEvent()}),n.click(function(){e.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var t=this;$(".switch").click(function(){var e=t.scollwapper.css("left");(e=parseInt(e))<0?t.scollwapper.animate({left:"0"}):t.scollwapper.animate({left:"-400px"})})},Auth.prototype.listenAddStaffEvent=function(){$("#addstaff-btn").click(function(e){e.preventDefault();for(var t=$("#MobilePhone1").val(),o=$("#username").val(),n=$("#email").val(),s=$("#name").val(),a=$("#Department").val(),i=$("#password1").val(),l=$("#password2").val(),r="",c=$("input[name='groups']"),u=0;u<c.length;u++)1==c[u].checked&&(r+=c[u].value+",");r=r.substring(0,r.length-1),console.log("用户组：",r),xfzajax.post({url:"/account/add_staff/",data:{mobilephone:t,worknumber:o,email:n,username:s,department:a,password1:i,password2:l,groups:r},success:function(e){if(200===e.code)window.messageBox.showSuccess("添加成功！"),setTimeout(" location.href='/account/staffs/'","300");else if(console.log(e),console.log(e.message[0]),e.message[0])console.log("走到1了！"),window.messageBox.showError(e.message);else for(var t in console.log("走到2了！"),e.message)window.messageBox.showError(e.message[t][0])},fail:function(){window.messageBox.showError("服务器内部错误！")}})})},Auth.prototype.listenEditStaffEvent=function(){$("#Editstaff-btn").click(function(e){e.preventDefault();var t=$(this).attr("staff-id");console.log("用户ID：",t);for(var o=$("#MobilePhone1").val(),n=$("#username").val(),s=$("#email").val(),a=$("#name").val(),i=$("#Department").val(),l="",r=$("input[name='groups']"),c=0;c<r.length;c++)1==r[c].checked&&(l+=r[c].value+",");l=l.substring(0,l.length-1),console.log("获取到的信息",o,n,s,a,i),xfzajax.post({url:"/account/Edit_Staff/",data:{id:t,mobilephone:o,worknumber:n,email:s,username:a,department:i,groups:l},success:function(e){if(200===e.code)window.messageBox.showSuccess("编辑成功！"),setTimeout(" location.href='/account/staffs/'","300");else if(console.log("返回Json信息：",e),console.log(e.message[0]),e.message[0])console.log("走到1了！"),window.messageBox.showError(e.message);else for(var t in console.log("走到2了！"),e.message)window.messageBox.showError(e.message[t][0])},fail:function(){window.messageBox.showError("服务器内部错误！")}})})},Auth.prototype.listenCancellationEvent=function(){$(".Cancellation_btn").click(function(){var e=$(this).parent().parent(),t=e.attr("id"),o=e.attr("Cancellation");xfzajax.post({url:"/account/Cancellation/",data:{id:t,Cancellation:o},success:function(e){var t;200===e.code&&("True"===o?Swal.fire({title:"员工启用成功",html:"我在<strong></strong>秒后自动关闭.",type:"success",timer:1e3,onBeforeOpen:function(){Swal.showLoading(),t=setInterval(function(){Swal.getContent().querySelector("strong").textContent=(Swal.getTimerLeft()/1e3).toFixed(0)},100)},onClose:function(){clearInterval(t)}}).then(function(){window.location.reload()}):Swal.fire({title:"员工注销成功",html:"我在<strong></strong>秒后自动关闭.",type:"success",timer:1e3,onBeforeOpen:function(){Swal.showLoading(),t=setInterval(function(){Swal.getContent().querySelector("strong").textContent=(Swal.getTimerLeft()/1e3).toFixed(0)},100)},onClose:function(){clearInterval(t)}}).then(function(){window.location.reload()}))},fail:function(){window.messageBox.showError("服务器内部错误！")}})})},$(function(){(new Auth).run()});