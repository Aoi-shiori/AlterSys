function Auth(){this.maskwapper=$(".mask-wapper"),this.scollwapper=$(".scoll-wapper")}Auth.prototype.run=function(){var t=this;t.listenshowhideEvent(),t.listenSwitchEvent(),t.listenAddStaffEvent(),t.listenCancellationEvent(),t.listenEditStaffEvent()},Auth.prototype.showEvent=function(){this.maskwapper.show()},Auth.prototype.hideEvent=function(){this.maskwapper.hide()},Auth.prototype.listenshowhideEvent=function(){var t=this,e=$(".editor-btn"),n=$(".delete-btn"),o=$(".close-btn");e.click(function(){t.showEvent()}),n.click(function(){t.showEvent()}),o.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var e=this;$(".switch").click(function(){var t=e.scollwapper.css("left");(t=parseInt(t))<0?e.scollwapper.animate({left:"0"}):e.scollwapper.animate({left:"-400px"})})},Auth.prototype.listenAddStaffEvent=function(){$("#addstaff-btn").click(function(){event.preventDefault();var t=$("#MobilePhone1").val(),e=$("#username").val(),n=$("#email").val(),o=$("#name").val(),a=$("#Department").val(),i=$("#password1").val(),s=$("#password2").val(),l=$("#Permissions").find("option:selected").val();alert(l);for(var r="",c=$("input[name='groups']"),u=0;u<c.length;u++)1==c[u].checked&&(r+=c[u].value+",");r=r.substring(0,r.length-1),alert(r),xfzajax.post({url:"/account/add_staff/",data:{MobilePhone:t,username:e,email:n,name:o,Department:a,password1:i,password2:s,Permissions:l,groups:r},success:function(t){200===t.code?window.messageBox.showSuccess("添加成功！"):window.messageBox.showError("服务有问题！")},fail:function(){window.messageBox.showError("服务器内部错误！")}})})},Auth.prototype.listenEditStaffEvent=function(){$("#Editstaff-btn").click(function(t){t.preventDefault();var e=$(this).attr("staff-id");alert(e);var n=$("#MobilePhone1").val();alert(n);for(var o=$("#username").val(),a=$("#email").val(),i=$("#name").val(),s=$("#Department").val(),l=$("#Permissions").find("option:selected").val(),r="",c=$("input[name='groups']"),u=0;u<c.length;u++)1==c[u].checked&&(r+=c[u].value+",");r=r.substring(0,r.length-1),xfzajax.post({url:"/account/Edit_Staff/",data:{id:e,MobilePhone:n,username:o,email:a,name:i,Department:s,Permissions:l,groups:r},success:function(t){200===t.code?(window.messageBox.showSuccess("添加成功！"),window.location.reload()):window.messageBox.showError("服务有问题！")},fail:function(){window.messageBox.showError("服务器内部错误！")}})})},Auth.prototype.listenCancellationEvent=function(){$(".Cancellation_btn").click(function(){var t=$(this).parent().parent(),e=t.attr("id"),n=t.attr("Cancellation");xfzajax.post({url:"/account/Cancellation/",data:{id:e,Cancellation:n},success:function(t){var e;200===t.code&&("True"===n?Swal.fire({title:"员工启用成功",html:"我在<strong></strong>秒后自动关闭.",type:"success",timer:1e3,onBeforeOpen:function(){Swal.showLoading(),e=setInterval(function(){Swal.getContent().querySelector("strong").textContent=(Swal.getTimerLeft()/1e3).toFixed(0)},100)},onClose:function(){clearInterval(e)}}).then(function(){window.location.reload()}):Swal.fire({title:"员工注销成功",html:"我在<strong></strong>秒后自动关闭.",type:"success",timer:1e3,onBeforeOpen:function(){Swal.showLoading(),e=setInterval(function(){Swal.getContent().querySelector("strong").textContent=(Swal.getTimerLeft()/1e3).toFixed(0)},100)},onClose:function(){clearInterval(e)}}).then(function(){window.location.reload()}))},fail:function(){window.messageBox.showError("服务器内部错误！")}})})},$(function(){(new Auth).run()});